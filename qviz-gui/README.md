# qviz-gui: Illuminating Quantum Profile-Guided Optimization via Interactive Source-Level Mapping Visualizations

GUI program about profile data

## Prerequisite

```bash
$ sudo apt-get install libxcb-xinerama0
$ pip install PyQt5==5.15.4
$ sudo apt-get install qttools5-dev-tools qttools5-dev
```

+ QOPS should be cloned to `~/QOPS`.
+ LLVM should be installed to `~/.llvm`.
  + LLVM building steps:

```bash
# If you have a lack of python3-distutils module
$ sudo apt install python3-distutils -y
# llvm-project-csp build steps
$ git clone https://github.com/ORNL-QCI/llvm-project-csp.git
$ cd llvm-project-csp/
$ mkdir build
$ cd build
$ cmake -G Ninja ../llvm/ -DLLVM_ENABLE_PROJECTS="clang;mlir;openmp" -DLLVM_ENABLE_RUNTIMES="libcxx;libcxxabi;compiler-rt" -DLLVM_PARALLEL_LINK_JOBS=1 -DCMAKE_EXE_LINKER_FLAGS="-Wl,--reduce-memory-overheads -Wl,--hash-size=1024" -DCMAKE_BUILD_TYPE=RelWithDebInfo -DBUILD_SHARED_LIBS=ON -DLLVM_TARGETS_TO_BUILD=X86 -DLLVM_ENABLE_DUMP=ON -DCMAKE_INSTALL_PREFIX=$HOME/.llvm
$ ninja
$ ninja install
```

+ Copy driver to simulator's src folder by `cp simulator_driver.py ../Quokka/src/correctness`
+ Configure qubit settings in `simulator_driver.py`
+ Check "Important Notes" in README of llvm-pass-qpgo

## GUI usage

```bash
$ python3 gui_start.py
```

## Command Usage

```bash
# normal compile
$ python3 command.py init xxx.cpp
# run on the simulator with Qasm file
$ python3 command.py sim xxx.qasm counter # counter-based simulation
$ python3 command.py sim xxx.qasm context # context-based simulation
$ python3 command.py sim xxx.qasm normal # normal simulation 
```

## Files discription

+ `gui_start.py`: launcher to this GUI program.
+ `command.py`: python script to encapsulate some operation.
+ `gui_ui.py`: transformed from gui_ui.ui.
+ `gui_ui.ui`: auto generated by QT designer.
+ `svg_core.py`: functions for drawing some svg item that this project need.
+ `svg_cpp.py`: draw svg with cpp source file and profile data.
+ `svg_qasm.py`: draw svg with qasm file and profile data.
+ `svg_mouse.py`: read svg file and add to QT, also connect with mouse click action.
+ `text_track.py`: processing and mapping qasm and cpp source file for hyperlink + utilization.

## Citation

Yu-Hui Wu, Po-Hsuan Huang, Chia-Heng Tu and Shih-Hao Hung. 2024. Illuminating Quantum Profile-Guided Optimization via Interactive Source-Level Mapping Visualizations. The 29th Workshop on Compiler Techniques and System Software for High-Performance and Embedded in Computing (CTHPC 2024), Taipei, Taiwan, May 30-31, 2024.